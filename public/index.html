<!DOCTYPE html>
<html>
<head>
  <title>Sammar Is a odd Guy</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px auto; }
    #answers { margin-top: 20px; }
    #readySection { margin-top: 20px; }
  </style>
</head>
<body>
  <h1>Sammar Is a odd Guy</h1>
  <div id="login">
    <input type="text" id="nameInput" placeholder="Enter your name" />
    <button id="joinBtn">Join Game</button>
  </div>

  <div id="game" style="display:none;">
    <h3>Your Question:</h3>
    <p id="question"></p>

    <input type="text" id="answerInput" placeholder="Your answer" />
    <button id="submitAnswer">Submit Answer</button>

    <div id="readySection">
      <button id="readyButton">Ready</button>
      <p id="readyStatus">Press Ready when you're ready to reveal the question.</p>
    </div>

    <h3>Players:</h3>
    <ul id="playerList"></ul>

    <h3>Answers:</h3>
    <ul id="answers"></ul>

    <h3 id="revealArea" style="color: darkred; margin-top: 20px;"></h3>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();

    const joinBtn = document.getElementById('joinBtn');
    const nameInput = document.getElementById('nameInput');
    const loginDiv = document.getElementById('login');
    const gameDiv = document.getElementById('game');
    const questionP = document.getElementById('question');
    const answerInput = document.getElementById('answerInput');
    const submitAnswerBtn = document.getElementById('submitAnswer');
    const playerList = document.getElementById('playerList');
    const answersList = document.getElementById('answers');
    const readyButton = document.getElementById('readyButton');
    const readyStatus = document.getElementById('readyStatus');
    const revealArea = document.getElementById('revealArea');

    joinBtn.onclick = () => {
      const name = nameInput.value.trim();
      if (!name) return alert('Enter your name');
      socket.emit('join', name);
      loginDiv.style.display = 'none';
      gameDiv.style.display = 'block';
    };

    socket.on('question', (q) => {
      questionP.textContent = q;
      revealArea.textContent = '';  // Clear reveal when new question arrives
      readyButton.disabled = false;
      readyStatus.textContent = "Press Ready when you're ready to reveal the question.";
    });

    socket.on('players', (players) => {
      playerList.innerHTML = '';
      players.forEach(p => {
        const li = document.createElement('li');
        li.textContent = p;
        playerList.appendChild(li);
      });
    });

    submitAnswerBtn.onclick = () => {
      const ans = answerInput.value.trim();
      if (!ans) return alert('Enter your answer');
      socket.emit('answer', ans);
      answerInput.value = '';
    };

    socket.on('answers', (answers) => {
      answersList.innerHTML = '';
      answers.forEach(({ name, answer }) => {
        const li = document.createElement('li');
        li.textContent = `${name}: ${answer || '(no answer)'}`;
        answersList.appendChild(li);
      });
    });

    // Handle Ready button click
    readyButton.onclick = () => {
      socket.emit('ready');
      readyButton.disabled = true;
      readyStatus.textContent = "You are ready! Waiting for others...";
    };

    // Show how many players are ready
    socket.on('readyStatus', (readyIds) => {
      readyStatus.textContent = `Players ready: ${readyIds.length}`;
    });

    // Reveal the normal question after 15s or when all ready
    socket.on('reveal', (normalQuestion) => {
      revealArea.textContent = `Normal question was: ${normalQuestion}`;
      readyStatus.textContent = 'Question revealed! Discuss now.';
      readyButton.disabled = true;
    });
  </script>
</body>
</html>


